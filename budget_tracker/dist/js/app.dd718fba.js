(function(){"use strict";var e={3366:function(e,a,t){t(4114);var o=t(5130),n=t(6768);const r={id:"app"};function i(e,a,t,o,i,s){const c=(0,n.g2)("MainLayout");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(c)])}const s={class:"main-layout"};function c(e,a,t,o,r,i){const c=(0,n.g2)("HeaderCash"),l=(0,n.g2)("router-view"),u=(0,n.g2)("FooterMenu");return(0,n.uX)(),(0,n.CE)("div",s,[e.isLoginPage?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(c,{key:0,userBalance:e.userBalance},null,8,["userBalance"])),(0,n.bF)(l),e.isLoginPage?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(u,{key:1}))])}var l=t(4232);function u(e,a,t,o,r,i){return(0,n.uX)(),(0,n.CE)("header",null,[(0,n.Lk)("div",null,(0,l.v_)(e.userBalance)+" zł",1)])}var d=t(144),p=t(9675),g=t(6400),m=t(2621),h=t(7844),k=t(7530);const y={apiKey:"AIzaSyCGGF8s-eq99d4-WPS_greT54y17sHorFo",authDomain:"project-psm-b0980.firebaseapp.com",databaseURL:"https://project-psm-b0980-default-rtdb.europe-west1.firebasedatabase.app",projectId:"project-psm-b0980",storageBucket:"project-psm-b0980.appspot.com",messagingSenderId:"166483875752",appId:"1:166483875752:web:97c02ddf19977412ed2f9d"},w=(0,g.Wp)(y);console.log("Firebase app initialized:",w);const f=(0,p.aU)(w);console.log("Firestore initialized:",f);const v=(0,m.xI)(w),b=((0,h.c7)(w),(0,k.dG)(w));console.log("Firebase configuration:",y);const C=async()=>{try{const e=await Notification.requestPermission();if("granted"===e){console.log("Notification permission granted.");const e=await(0,k.gf)(b,{vapidKey:"BPxGe-PhrQrXYah0TOYjmrahIUAoh5Sp8KdKWs5JqY1Yh_Jw_KlloOeOOkEzIwrj8jpAq6S6UZooXupZcRifGqY"});e?(console.log("FCM Token:",e),L(e)):console.log("No registration token available. Request permission to generate one.")}else console.log("Notification permission denied.")}catch(e){console.error("Unable to get permission to notify or retrieve token.",e)}},L=async e=>{try{const a=v.currentUser;if(a){const t=a.uid,o=(0,p.H9)(f,`userSettings/${t}`);await(0,p.BN)(o,{fcmToken:e},{merge:!0}),console.log("FCM token saved successfully")}}catch(a){console.error("Error saving FCM token:",a)}};(0,k.xD)(b,(e=>{console.log("Message received. ",e),"granted"===Notification.permission&&new Notification(e.notification.title,{body:e.notification.body})}));const I=()=>{const e=v.currentUser;return console.log("Current user:",e),e?e.uid:null};C();var E=(0,n.pM)({name:"HeaderCash",setup(){const e=(0,d.KR)(0),a=(0,d.KR)(null),t=async e=>{try{const a=await(0,p.GG)((0,p.rJ)(f,`users/${e}/transactions`)),t=[],o=[],n={},r={};return a.forEach((e=>{const a=e.data(),i={id:e.id,...a};"income"===a.type?(t.push(i),n[a.category]=(n[a.category]||0)+a.amount):"expense"===a.type&&(o.push(i),r[a.category]=(r[a.category]||0)+a.amount)})),{income:t,expenses:o,incomeCategoryData:n,expenseCategoryData:r}}catch(a){throw console.error("Error fetching transactions: ",a),a}},o=async a=>{try{const{income:o,expenses:n}=await t(a),r=o.reduce(((e,a)=>e+a.amount),0),i=n.reduce(((e,a)=>e+a.amount),0);e.value=r-i}catch(o){console.error("Error fetching user balance:",o)}};return(0,n.sV)((async()=>{try{a.value=await I(),a.value&&o(a.value)}catch(e){console.error("Error fetching user ID:",e)}})),{userBalance:e}}}),j=t(1241);const z=(0,j.A)(E,[["render",u],["__scopeId","data-v-68c54102"]]);var P=z;function U(e,a,t,o,r,i){const s=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("footer",null,[(0,n.bF)(s,{to:"/main"},{default:(0,n.k6)((()=>[(0,n.eW)("Podsumowanie")])),_:1}),(0,n.bF)(s,{to:"/new-transaction"},{default:(0,n.k6)((()=>[(0,n.eW)("Nowa transakcja")])),_:1}),(0,n.bF)(s,{to:"/settings-page"},{default:(0,n.k6)((()=>[(0,n.eW)("Ustawienia")])),_:1}),(0,n.bF)(s,{to:"/profile-page"},{default:(0,n.k6)((()=>[(0,n.eW)("Profil")])),_:1})])}var x=(0,n.pM)({name:"FooterMenu"});const F=(0,j.A)(x,[["render",U],["__scopeId","data-v-693ba95e"]]);var S=F,T=t(1387),M=(0,n.pM)({name:"MainLayout",components:{HeaderCash:P,FooterMenu:S},setup(){const e=(0,d.KR)(0),a=I(),t=async()=>{try{const t=(0,p.rJ)(f,`users/${a}/transactions`),o=(0,p.P)(t),n=await(0,p.GG)(o);let r=0,i=0;n.forEach((e=>{const a=e.data();"income"===a.transactionType?r+=a.amount:"expense"===a.transactionType&&(i+=a.amount)})),e.value=r-i}catch(t){console.error("Error fetching transactions:",t)}};(0,n.sV)(t);const o=(0,T.lq)(),r="/"===o.path;return{userBalance:e,isLoginPage:r}}});const R=(0,j.A)(M,[["render",c]]);var _=R,D={name:"App",components:{MainLayout:_}};const B=(0,j.A)(D,[["render",i]]);var N=B;const A=e=>((0,n.Qi)("data-v-7be6c5bc"),e=e(),(0,n.jt)(),e),W={class:"cashflow content"},O=A((()=>(0,n.Lk)("h2",null,"Miesięczne podsumowanie transakcji",-1))),K={class:"charts-container"},X={class:"chart-wrapper"},q=A((()=>(0,n.Lk)("h3",null,"Przychody:",-1))),J={key:1},G={class:"chart-wrapper"},$=A((()=>(0,n.Lk)("h3",null,"Wydatki:",-1))),V={key:1},H={class:"transactions-container"},Z=A((()=>(0,n.Lk)("h3",null,"Przychody:",-1))),Q=["src","onClick"],Y=["onClick"],ee=A((()=>(0,n.Lk)("h3",null,"Wydatki:",-1))),ae=["src","onClick"],te=["onClick"],oe=A((()=>(0,n.Lk)("span",{class:"close"},"×",-1))),ne=["src"];function re(e,a,t,o,r,i){const s=(0,n.g2)("PieChart");return(0,n.uX)(),(0,n.CE)("div",W,[O,(0,n.Lk)("div",K,[(0,n.Lk)("div",X,[q,e.incomeTransactions.length?((0,n.uX)(),(0,n.Wv)(s,{key:0,data:e.incomeChartData,options:e.chartOptions},null,8,["data","options"])):((0,n.uX)(),(0,n.CE)("p",J,"Brak transakcji przychodów"))]),(0,n.Lk)("div",G,[$,e.expenseTransactions.length?((0,n.uX)(),(0,n.Wv)(s,{key:0,data:e.expenseChartData,options:e.chartOptions},null,8,["data","options"])):((0,n.uX)(),(0,n.CE)("p",V,"Brak transakcji wydatków"))])]),(0,n.Lk)("div",H,[(0,n.Lk)("div",null,[Z,(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.incomeTransactions,(a=>((0,n.uX)(),(0,n.CE)("li",{key:a.id},[(0,n.eW)((0,l.v_)(a.date)+" "+(0,l.v_)(e.getCategoryName(a.category))+" "+(0,l.v_)(a.amount)+"zł "+(0,l.v_)(a.description)+" ",1),a.receiptImage?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.receiptImage,onClick:t=>e.showImage(a.receiptImage),class:"receipt-image"},null,8,Q)):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:t=>e.deleteTransaction(a.id,"income")},"Usuń",8,Y)])))),128))])]),(0,n.Lk)("div",null,[ee,(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.expenseTransactions,(a=>((0,n.uX)(),(0,n.CE)("li",{key:a.id},[(0,n.eW)((0,l.v_)(a.date)+" "+(0,l.v_)(e.getCategoryName(a.category))+" "+(0,l.v_)(a.amount)+"zł "+(0,l.v_)(a.description)+" ",1),a.receiptImage?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.receiptImage,onClick:t=>e.showImage(a.receiptImage),class:"receipt-image"},null,8,ae)):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:t=>e.deleteTransaction(a.id,"expense")},"Usuń",8,te)])))),128))])])]),e.showModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal",onClick:a[0]||(a[0]=(...a)=>e.closeModal&&e.closeModal(...a))},[oe,(0,n.Lk)("img",{class:"modal-content",src:e.modalImage},null,8,ne)])):(0,n.Q3)("",!0)])}var ie=t(1010),se=t(6912);se.t1.register(se.hE,se.m_,se.s$,se.Bs,se.PP,se.kc),se.t1.defaults.font.size=12;var ce=(0,n.pM)({name:"HomePage",components:{PieChart:ie.Fq},setup(){const e=(0,d.KR)([]),a=(0,d.KR)([]),t=(0,d.KR)({}),o=(0,d.KR)({}),r=(0,d.KR)({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Podział według kategorii"}}}),i=(0,d.KR)(!1),s=(0,d.KR)(""),c={1:"#FF6384",2:"#36A2EB",3:"#FFCE56",4:"#0477EB",5:"#74A3D6",6:"#C549D9",7:"#2AE0B3",8:"#2CE874",9:"#673574",10:"#D46552",11:"#8D99DD",12:"#74F351",13:"#A77181",14:"#BAC436",15:"#5F0F47",16:"#D46552"},l={1:"Jedzenie",2:"Rozrywka",3:"Transport",4:"Zdrowie",5:"Dom",6:"Ubrania",7:"Uroda",8:"Edukacja",9:"Prezent",10:"Inne",11:"Pensja",12:"Prezent",13:"Zasiłek",14:"Premia",15:"Biznes",16:"Inne"},u=async(t,o)=>{try{const n=(0,m.xI)().currentUser;if(n){const r=n.uid;await(0,p.kd)((0,p.H9)(f,`users/${r}/transactions`,t)),"income"===o?e.value=e.value.filter((e=>e.id!==t)):"expense"===o&&(a.value=a.value.filter((e=>e.id!==t))),await h(r)}}catch(n){console.error("Error deleting transaction:",n)}},g=e=>l[e]||e,h=async n=>{try{const r=await(0,p.GG)((0,p.rJ)(f,`users/${n}/transactions`)),i=[],s=[],l={},u={};r.forEach((e=>{const a=e.data(),t={id:e.id,...a};"income"===a.type?(i.push(t),l[a.category]=(l[a.category]||0)+a.amount):"expense"===a.type&&(s.push(t),u[a.category]=(u[a.category]||0)+a.amount)})),i.sort(((e,a)=>new Date(a.date)-new Date(e.date))),s.sort(((e,a)=>new Date(a.date)-new Date(e.date))),e.value=i,a.value=s,t.value={labels:Object.keys(l).map(g),datasets:[{label:"Przychody",backgroundColor:Object.keys(l).map((e=>c[e]||"#36A2EB")),data:Object.values(l)}]},o.value={labels:Object.keys(u).map(g),datasets:[{label:"Wydatki",backgroundColor:Object.keys(u).map((e=>c[e]||"#FF6384")),data:Object.values(u)}]}}catch(r){console.error("Error fetching transactions:",r)}},k=e=>{s.value=e,i.value=!0},y=()=>{i.value=!1,s.value=""};return(0,n.sV)((()=>{const e=(0,m.xI)();(0,m.hg)(e,(e=>{e&&setTimeout((()=>{h(e.uid)}),300)}))})),{incomeTransactions:e,expenseTransactions:a,incomeChartData:t,expenseChartData:o,chartOptions:r,getCategoryName:g,deleteTransaction:u,showModal:i,modalImage:s,showImage:k,closeModal:y}}});const le=(0,j.A)(ce,[["render",re],["__scopeId","data-v-7be6c5bc"]]);var ue=le;const de=e=>((0,n.Qi)("data-v-de655f38"),e=e(),(0,n.jt)(),e),pe={class:"new-transaction"},ge=de((()=>(0,n.Lk)("h2",null,"Dodaj nową transakcję",-1))),me=de((()=>(0,n.Lk)("option",{value:""},"Wybierz typ",-1))),he=de((()=>(0,n.Lk)("option",{value:"income"},"Przychód",-1))),ke=de((()=>(0,n.Lk)("option",{value:"expense"},"Wydatek",-1))),ye=[me,he,ke],we=de((()=>(0,n.Lk)("option",{value:""},"Wybierz kategorię",-1))),fe=["value"],ve=de((()=>(0,n.Lk)("button",{type:"submit"},"Dodaj transakcję",-1)));function be(e,a,t,r,i,s){return(0,n.uX)(),(0,n.CE)("div",pe,[ge,(0,n.Lk)("form",{onSubmit:a[7]||(a[7]=(0,o.D$)(((...a)=>e.addTransaction&&e.addTransaction(...a)),["prevent"]))},[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=a=>e.transactionType=a),required:"",onChange:a[1]||(a[1]=(...a)=>e.updateCategories&&e.updateCategories(...a))},ye,544),[[o.u1,e.transactionType]]),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":a[2]||(a[2]=a=>e.amount=a),required:"",placeholder:"Kwota transakcji"},null,512),[[o.Jo,e.amount]]),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":a[3]||(a[3]=a=>e.date=a),required:""},null,512),[[o.Jo,e.date]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=a=>e.category=a),required:""},[we,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.currentCategories,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name),9,fe)))),128))],512),[[o.u1,e.category]]),(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":a[5]||(a[5]=a=>e.description=a),placeholder:"Opis transakcji"},null,512),[[o.Jo,e.description]]),(0,n.Lk)("input",{type:"file",onChange:a[6]||(a[6]=(...a)=>e.handleFileUpload&&e.handleFileUpload(...a))},null,32),ve],32)])}var Ce=(0,n.pM)({name:"NewTransaction",data(){return{incomeCategories:[{id:11,name:"Pensja"},{id:12,name:"Prezent"},{id:13,name:"Zasiłek"},{id:14,name:"Premia"},{id:15,name:"Biznes"},{id:16,name:"Inne"}],expenseCategories:[{id:1,name:"Jedzenie"},{id:2,name:"Rozrywka"},{id:3,name:"Transport"},{id:4,name:"Zdrowie"},{id:5,name:"Dom"},{id:6,name:"Ubrania"},{id:7,name:"Uroda"},{id:8,name:"Edukacja"},{id:9,name:"Prezent"},{id:10,name:"Inne"}],currentCategories:[],transactionType:"",amount:null,date:this.getCurrentDate(),category:"",description:"",receiptImage:null}},methods:{getCurrentDate(){const e=new Date,a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${a}-${t}-${o}`},handleFileUpload(e){this.receiptImage=e.target.files[0]},updateCategories(){"income"===this.transactionType?this.currentCategories=this.incomeCategories:"expense"===this.transactionType?this.currentCategories=this.expenseCategories:this.currentCategories=[]},async addTransaction(){if(!this.transactionType)return void alert("Proszę wybrać typ transakcji.");if(!this.amount||this.amount<=0)return void alert("Proszę wprowadzić prawidłową kwotę transakcji.");let e=null;if(this.receiptImage){const a=(0,h.c7)(),t=(0,h.KR)(a,this.receiptImage.name);await(0,h.D)(t,this.receiptImage),e=await(0,h.qk)(t)}try{const a=(0,m.xI)(),t=a.currentUser;if(!t)throw new Error("Użytkownik niezalogowany");const o=t.uid,n={type:this.transactionType,amount:this.amount,date:this.date,category:this.category,description:this.description,receiptImage:e};await(0,p.gS)((0,p.rJ)(f,`users/${o}/transactions`),n),this.transactionType="",this.amount=null,this.date=this.getCurrentDate(),this.category="",this.description="",this.receiptImage=null,alert("Transakcja została dodana pomyślnie.")}catch(a){console.error("Błąd podczas dodawania transakcji:",a),alert("Wystąpił błąd podczas dodawania transakcji. Spróbuj ponownie później.")}}}});const Le=(0,j.A)(Ce,[["render",be],["__scopeId","data-v-de655f38"]]);var Ie=Le;const Ee=e=>((0,n.Qi)("data-v-3e292d8c"),e=e(),(0,n.jt)(),e),je={class:"profile-page"},ze=Ee((()=>(0,n.Lk)("h2",null,"Mój profil",-1))),Pe={class:"form-group"},Ue={key:0,class:"photo-preview"},xe=["src"],Fe={class:"form-group"},Se=Ee((()=>(0,n.Lk)("label",{for:"displayName"},"Imię i nazwisko:",-1))),Te={class:"form-group"},Me=Ee((()=>(0,n.Lk)("label",{for:"email"},"E-mail:",-1))),Re=Ee((()=>(0,n.Lk)("button",{type:"submit",class:"btn-submit"},"Zapisz zmiany",-1)));function _e(e,a,t,r,i,s){return(0,n.uX)(),(0,n.CE)("div",je,[ze,(0,n.Lk)("form",{onSubmit:a[3]||(a[3]=(0,o.D$)(((...a)=>e.saveProfileChanges&&e.saveProfileChanges(...a)),["prevent"]))},[(0,n.Lk)("div",Pe,[e.photoURL?((0,n.uX)(),(0,n.CE)("div",Ue,[(0,n.Lk)("img",{src:e.photoURL,alt:"Zdjęcie profilowe",class:"profile-photo"},null,8,xe)])):(0,n.Q3)("",!0),(0,n.Lk)("input",{type:"file",onChange:a[0]||(a[0]=(...a)=>e.handleFileUpload&&e.handleFileUpload(...a))},null,32)]),(0,n.Lk)("div",Fe,[Se,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=a=>e.displayName=a),required:""},null,512),[[o.Jo,e.displayName]])]),(0,n.Lk)("div",Te,[Me,(0,n.bo)((0,n.Lk)("input",{type:"email",class:"email-field","onUpdate:modelValue":a[2]||(a[2]=a=>e.email=a),disabled:""},null,512),[[o.Jo,e.email]])]),Re],32)])}var De=(0,n.pM)({name:"ProfilePage",data(){return{displayName:"",email:"",photoURL:"",newPhoto:null}},async created(){const e=(0,m.xI)(),a=e.currentUser;if(a){const e=(0,p.H9)(f,"userProfileInfo",a.uid),t=await(0,p.x7)(e);if(t.exists()){const e=t.data();this.displayName=e.displayName||"",this.email=e.email,this.photoURL=e.photoURL||""}else this.email=a.email;this.isDataLoaded=!0}},methods:{async saveProfileChanges(){try{const e=(0,m.xI)(),a=e.currentUser;if(a){if(this.newPhoto){const e=(0,h.c7)(),t=(0,h.KR)(e,`users/${a.uid}/profile.jpg`);await(0,h.D)(t,this.newPhoto);const o=await(0,h.qk)(t);await(0,m.r7)(a,{photoURL:o}),this.photoURL=o}await(0,m.r7)(a,{displayName:this.displayName});const e={displayName:this.displayName,email:this.email,photoURL:this.photoURL},t=(0,p.H9)(f,"userProfileInfo",a.uid);await(0,p.BN)(t,e,{merge:!0}),alert("Zmiany w profilu zostały zapisane.")}}catch(e){console.error("Błąd podczas zapisywania zmian profilu:",e),alert("Wystąpił błąd podczas zapisywania zmian profilu. Spróbuj ponownie później.")}},handleFileUpload(e){const a=e.target.files[0];if(a){this.newPhoto=a;const e=new FileReader;e.onload=e=>{this.photoURL=e.target.result},e.readAsDataURL(a)}}}});const Be=(0,j.A)(De,[["render",_e],["__scopeId","data-v-3e292d8c"]]);var Ne=Be;const Ae=e=>((0,n.Qi)("data-v-30ae552a"),e=e(),(0,n.jt)(),e),We={class:"settings-page"},Oe=Ae((()=>(0,n.Lk)("h2",null,"Ustawienia",-1))),Ke=Ae((()=>(0,n.Lk)("button",{type:"submit"},"Zapisz ustawienia powiadomień",-1)));function Xe(e,a,t,r,i,s){return(0,n.uX)(),(0,n.CE)("div",We,[Oe,(0,n.Lk)("form",{onSubmit:a[1]||(a[1]=(0,o.D$)(((...a)=>e.saveNotificationSettings&&e.saveNotificationSettings(...a)),["prevent"]))},[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=a=>e.notificationsEnabled=a)},null,512),[[o.lH,e.notificationsEnabled]]),(0,n.eW)(" Odbieraj powiadomienia ")]),Ke],32),(0,n.Lk)("button",{onClick:a[2]||(a[2]=(...a)=>e.logout&&e.logout(...a))},"Wyloguj")])}var qe=(0,n.pM)({name:"SettingsPage",setup(){const e=(0,d.KR)(!1),a=(0,T.rd)(),t=(0,p.aU)(),o=async()=>{try{const a=(0,m.xI)(),o=a.currentUser;if(!o)throw new Error("User not authenticated");{const a=o.uid,n=(0,p.H9)(t,`userSettings/${a}`),r=await(0,p.x7)(n);r.exists()&&(e.value=r.data().notificationsEnabled)}}catch(a){console.error("Błąd podczas pobierania ustawień powiadomień:",a)}},r=async()=>{try{const o=(0,m.xI)(),n=o.currentUser;if(!n)throw new Error("User not authenticated");{const o=n.uid,r=(0,p.H9)(t,`userSettings/${o}`);if(await(0,p.BN)(r,{notificationsEnabled:e.value},{merge:!0}),e.value)try{console.log("Uzyskiwanie tokenu FCM...");const e=await(0,k.gf)(b,{vapidKey:"BPxGe-PhrQrXYah0TOYjmrahIUAoh5Sp8KdKWs5JqY1Yh_Jw_KlloOeOOkEzIwrj8jpAq6S6UZooXupZcRifGqY"});console.log("Token FCM uzyskany:",e),await(0,p.BN)(r,{fcmToken:e},{merge:!0}),console.log("Token FCM zapisany w Firestore")}catch(a){throw console.error("Błąd podczas uzyskiwania tokenu FCM:",a),new Error("Błąd podczas uzyskiwania tokenu FCM")}else await(0,p.BN)(r,{fcmToken:null},{merge:!0});alert("Ustawienia powiadomień zostały zapisane.")}}catch(o){console.error("Błąd podczas zapisywania ustawień powiadomień:",o),alert("Wystąpił błąd podczas zapisywania ustawień powiadomień. Spróbuj ponownie później.")}},i=async()=>{try{await(0,m.xI)().signOut(),a.push("/")}catch(e){console.error("Błąd podczas wylogowywania użytkownika:",e),alert("Wystąpił błąd podczas wylogowywania użytkownika. Spróbuj ponownie później.")}};return(0,n.sV)((()=>{o()})),{notificationsEnabled:e,saveNotificationSettings:r,logout:i}}});const Je=(0,j.A)(qe,[["render",Xe],["__scopeId","data-v-30ae552a"]]);var Ge=Je;const $e={class:"sign-in-container"},Ve=(0,n.Lk)("h1",null,"Sign In to an Account",-1),He={key:0},Ze=(0,n.Lk)("h2",null,"Register an Account",-1);function Qe(e,a,t,r,i,s){return(0,n.uX)(),(0,n.CE)("div",$e,[Ve,(0,n.Lk)("p",null,[(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"Email","onUpdate:modelValue":a[0]||(a[0]=e=>r.email=e)},null,512),[[o.Jo,r.email]])]),(0,n.Lk)("p",null,[(0,n.bo)((0,n.Lk)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e)},null,512),[[o.Jo,r.password]])]),r.errMsg?((0,n.uX)(),(0,n.CE)("p",He,(0,l.v_)(r.errMsg),1)):(0,n.Q3)("",!0),(0,n.Lk)("p",null,[(0,n.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>r.signIn&&r.signIn(...e))},"Submit")]),(0,n.Lk)("p",null,[(0,n.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>r.signInWithGoogle&&r.signInWithGoogle(...e))},"Sign In With Google")]),Ze,(0,n.Lk)("p",null,[(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"Email","onUpdate:modelValue":a[4]||(a[4]=e=>r.registerEmail=e)},null,512),[[o.Jo,r.registerEmail]])]),(0,n.Lk)("p",null,[(0,n.bo)((0,n.Lk)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":a[5]||(a[5]=e=>r.registerPassword=e)},null,512),[[o.Jo,r.registerPassword]])]),(0,n.Lk)("p",null,[(0,n.Lk)("button",{onClick:a[6]||(a[6]=(...e)=>r.register&&r.register(...e))},"Register")])])}var Ye={name:"SignInSignUpPage",setup(){const e=(0,d.KR)(""),a=(0,d.KR)(""),t=(0,d.KR)(""),o=(0,d.KR)(""),n=(0,d.KR)(""),r=(0,T.rd)(),i=(0,m.xI)(),s=()=>{const o=(0,m.xI)();(0,m.x9)(o,e.value,a.value).then((e=>{const a=e.user;console.log("Successfully signed in!",a),r.push("/main")})).catch((e=>{switch(console.error(e.code),e.code){case"auth/invalid-email":t.value="Invalid email";break;case"auth/user-not-found":t.value="No account with that email was found";break;case"auth/wrong-password":t.value="Incorrect password";break;default:t.value="Email or password was incorrect";break}}))},c=()=>{const e=(0,m.xI)(),a=new m.HF;(0,m.df)(e,a).then((e=>{const a=e.user;console.log("Successfully signed in with Google!",a),r.push("/main")})).catch((e=>{console.error(e)}))},l=()=>{(0,m.eJ)(i,o.value,n.value).then((e=>{const a=e.user;console.log("Successfully registered and signed in!",a),r.push("/main")})).catch((e=>{switch(console.error(e.code),e.code){case"auth/email-already-in-use":t.value="The email address is already in use by another account";break;case"auth/invalid-email":t.value="The email address is not valid";break;case"auth/weak-password":t.value="The password is too weak";break;default:t.value="Failed to register";break}}))},u=()=>{(0,m.CI)(i).then((()=>{console.log("Successfully signed out!")})).catch((e=>{console.error("Sign out error:",e)}))};return{email:e,password:a,errMsg:t,registerEmail:o,registerPassword:n,signIn:s,signInWithGoogle:c,register:l,signOut:u}}};const ea=(0,j.A)(Ye,[["render",Qe]]);var aa=ea;const ta=(0,T.aE)({history:(0,T.Bt)(),routes:[{path:"/",name:"Login Page",component:aa},{path:"/main",component:_,meta:{requiresAuth:!0},children:[{path:"",name:"HomePage",component:ue,meta:{requiresAuth:!0}},{path:"/new-transaction",name:"NewTransaction",component:Ie,meta:{requiresAuth:!0}},{path:"/profile-page",name:"ProfilePage",component:Ne,meta:{requiresAuth:!0}},{path:"/settings-page",name:"Settings Page",component:Ge,meta:{requiresAuth:!0}}]}]}),oa=()=>new Promise(((e,a)=>{const t=(0,m.hg)((0,m.xI)(),(a=>{t(),e(a)}),a)}));ta.beforeEach((async(e,a,t)=>{e.matched.some((e=>e.meta.requiresAuth))?await oa()?t():(alert("You don't have access!"),t("/")):t()}));var na=ta,ra=t(4458);"serviceWorker"in navigator&&navigator.serviceWorker.register("/Project-PSM/firebase-messaging-sw.js").then((e=>{console.log("Firebase Messaging Service Worker registered with scope:",e.scope)})).catch((e=>{console.error("Firebase Messaging Service Worker registration failed:",e)})),(0,ra.k)("/Project-PSM/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var ia=t(9774);const sa=new ia.EventEmitter;let ca;sa.setMaxListeners(20),(0,o.Ef)(N).use(na).mount("#app"),window.handleSignInSignUp=async(e,a)=>{const t=(0,m.xI)();try{const o=await(0,m.x9)(t,e,a);console.log("Zalogowano:",o.user),na.push("/")}catch(o){if("auth/user-not-found"===o.code)try{const o=await(0,m.eJ)(t,e,a);console.log("Zarejestrowano:",o.user),na.push("/")}catch(o){console.error("Błąd podczas rejestracji:",o)}else console.error("Błąd podczas logowania:",o)}};const la=(0,m.xI)();(0,m.hg)(la,(e=>{ca||(ca=(0,o.Ef)(N),ca.use(na),ca.component("HeaderCash",P),ca.component("FooterMenu",S),ca.config.globalProperties.$db=f,ca.mount("#app")),e?(console.log("User is logged in:",e),na.push("/main")):(console.log("No user is logged in."),na.push("/"))}))}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var r=a[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,o,n,r){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],r=e[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&r||i>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[c])}))?o.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(u--,1);var l=n();void 0!==l&&(a=l)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,n,r]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,o){var n,r,i=o[0],s=o[1],c=o[2],l=0;if(i.some((function(a){return 0!==e[a]}))){for(n in s)t.o(s,n)&&(t.m[n]=s[n]);if(c)var u=c(t)}for(a&&a(o);l<i.length;l++)r=i[l],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},o=self["webpackChunkbudget_tracker"]=self["webpackChunkbudget_tracker"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(3366)}));o=t.O(o)})();
//# sourceMappingURL=app.dd718fba.js.map